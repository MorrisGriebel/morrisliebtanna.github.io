<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T√§gliches R√§tsel</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.26.1/axios.min.js"></script>
</head>
<body>
    <h2>T√§gliches R√§tsel</h2>
    <div id="mediaContainer">Lade Bilder...</div>
    <input type="text" id="answer" placeholder="Dein L√∂sungswort...">
    <button onclick="checkAnswer()">√úberpr√ºfen</button>
    <p id="message"></p>

    <script>
        const cloudName = "4Bilder1Wort"; // Dein Cloudinary Name
        const apiKey = "662884519138926"; // Dein Cloudinary API-Key
        const startDate = new Date("2024-02-24"); // Startdatum (√§ndern, wenn n√∂tig)
        const today = new Date();
        const dayNumber = Math.floor((today - startDate) / (1000 * 60 * 60 * 24)) + 1; // Berechnet den aktuellen Tag ab Startdatum
        
        async function loadImages() {
            const folderName = `Tage/Tag${dayNumber}-`; // Basis des Ordnernamens
            const cloudinaryURL = `https://res.cloudinary.com/${cloudName}/image/list/${folderName}.json`;

            try {
                const response = await axios.get(cloudinaryURL);
                const images = response.data.resources;
                const mediaContainer = document.getElementById('mediaContainer');
                mediaContainer.innerHTML = ""; // Reset

                // Hole das L√∂sungswort aus dem Ordnernamen (TagX-Spanien ‚Üí Spanien)
                const solutionWord = images[0].public_id.split("/")[1].split("-")[1];

                // Zeige maximal 4 Bilder an
                images.slice(0, 4).forEach(img => {
                    const imgElement = document.createElement("img");
                    imgElement.src = `https://res.cloudinary.com/${cloudName}/image/upload/${img.public_id}.jpg`;
                    imgElement.style.width = "150px";
                    mediaContainer.appendChild(imgElement);
                });

                // Speichere das L√∂sungswort f√ºr die √úberpr√ºfung
                window.solution = solutionWord.toLowerCase();
            } catch (error) {
                console.error("Fehler beim Laden der Bilder:", error);
                document.getElementById("mediaContainer").innerText = "Bilder konnten nicht geladen werden.";
            }
        }

        function checkAnswer() {
            const answer = document.getElementById("answer").value.toLowerCase();
            const message = document.getElementById("message");

            if (answer === window.solution) {
                message.textContent = "üéâ Richtig! Du hast das R√§tsel gel√∂st!";
                message.style.color = "green";
            } else {
                message.textContent = "‚ùå Leider falsch, versuch es nochmal!";
                message.style.color = "red";
            }
        }

        loadImages();
    </script>
</body>
</html>
