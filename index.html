<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tägliches Rätsel</title>
</head>
<body>
    <h1>Tägliches Rätsel</h1>
    <div id="mediaContainer">Lade Bilder...</div>
    <input type="text" id="solutionInput" placeholder="Dein Lösungswort...">
    <button onclick="checkSolution()">Überprüfen</button>
    <p id="result"></p>

    <script>
        const cloudName = "4Bilder1Wort";
        const apiKey = "662884519138926";
        const folderPrefix = "Tage";

        async function loadImagesForDay(dayNumber) {
            const folderPath = `${folderPrefix}/Tag${dayNumber}-`;  // z. B. "Tage/Tag1-Spanien"

            try {
                const response = await fetch(`https://res.cloudinary.com/${cloudName}/image/list/${folderPath}.json`);
                if (!response.ok) throw new Error("Bilder konnten nicht geladen werden.");

                const data = await response.json();
                const images = data.resources;
                const mediaContainer = document.getElementById("mediaContainer");
                mediaContainer.innerHTML = "";

                if (images.length === 0) {
                    mediaContainer.innerText = "Keine Bilder gefunden.";
                    return;
                }

                images.forEach((image) => {
                    const img = document.createElement("img");
                    img.src = `https://res.cloudinary.com/${cloudName}/image/upload/${image.public_id}.jpg`;
                    img.style.width = "150px";
                    img.style.margin = "5px";
                    img.alt = "Rätselbild";
                    mediaContainer.appendChild(img);
                });

                // Lösungswort aus Ordnernamen extrahieren
                const solutionWord = folderPath.split("-")[1].replace("/", "");
                document.getElementById("solutionInput").dataset.word = solutionWord.toLowerCase();

            } catch (error) {
                console.error(error);
                document.getElementById("mediaContainer").innerText = "Bilder konnten nicht geladen werden.";
            }
        }

        function checkSolution() {
            const userInput = document.getElementById("solutionInput").value.trim().toLowerCase();
            const correctWord = document.getElementById("solutionInput").dataset.word;

            if (userInput === correctWord) {
                document.getElementById("result").innerText = "✅ Richtig!";
            } else {
                document.getElementById("result").innerText = "❌ Falsch, versuche es erneut!";
            }
        }

        loadImagesForDay(1);  // Beginnt mit Tag 1
    </script>
</body>
</html>
